<!DOCTYPE html>
<html ng-app="mittens" lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mittens</title>
  <!-- Download Bootstrap and moved the folder to app root, delete extension folder name -->
  <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="bootstrap/css/style.css">
  <script src="angular.min.js" type="text/javascript"></script>

<!-- Step 1: Initiate Angular app using ng-app in HTML tag and add angular.module -->
<!-- Module is a function, result of this function is "app" saved in var app -->
  <script type="text/javascript">
    var app = angular.module('mittens', []);

    // $scope is an object/service.property(meows), it allows two-way data binding using {{}}
    app.controller('MittensCtrl', function($scope, $http) {

      // The below code associated with ng-model below will record/submit to console (console.log($scope.newMeow), but instead, seding it to $http.post json)
      $scope.submitNewMeow = function() {
        $http.post('/meows', {newMeow: $scope.newMeow}).then(function() {
          alert('success!');
        });
      };

    //// This block of code was moved from the front end to server.js to store in the database
      // $scope.meows = [
      //   'Hello, I flipped over a cup.',
      //   'My owner just said hi to me. Yum.',
      //   'It is time for a nap',
      //   'Hello again.',
      // ];

    //// Replaced block of code above w/ $scope.meows = response.data etc.

    // Callback function, that gets call when successfully gets meows from the server
      // $http is a service, .get is a function in that service (calls route meows).success is a promise (way to specify callback)
      $http.get('/meows').then(function(response) {

        $scope.meows = response.data;

      });

    });

  </script>

</head>
<!-- Step 2: Initialize Angular controller -->
<body ng-controller="MittensCtrl">
  <h1 class="page-title">Mittens</h1>
  <!-- Row Parent of H3 is feed (taking from the style .feed class above) -->
  <div class="row feed">
    <div class="col-md-4">
      <h4>Login</h4>
      <br>
      <!-- This creates a login form for username and password -->
      <input type="text" size="30" placeholder="Username">
      <br><br>
      <input type="password" size="30" placeholder="Password">
    </div><br>

    <div class="col-md-8">
      <div class="new-meow">
        <!-- ng-model directive binds (two-way) the value of HTML controls (input, select, textarea) to app data-->
        <input type="text" class="form-control" ng-model="newMeow" placeholder="What do you have to meow today?">
        <button type="button" class="btn btn-primary" ng-click="submitNewMeow()">Submit</button>
      </div>
      <!-- ng-repeat to repeat H3 block for each meow in the function $scope.meows array above -->
      <h3 ng-repeat="postMeow in meows">
        <!-- glyphicon is a bootstrap component, area-hidden will disable reading for impaired -->
        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
        {{ postMeow }}
      </h3>
    </div>
  </div>
</body>
</html>
